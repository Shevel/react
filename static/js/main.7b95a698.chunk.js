(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{103:function(e,t,n){e.exports={pages:"Paginator_pages__3CpKL",pagination_item:"Paginator_pagination_item__3V1zt",selected:"Paginator_selected__2iR5_",paginator_btn:"Paginator_paginator_btn__1TJhr",page_container:"Paginator_page_container__16pXy"}},114:function(e,t,n){e.exports=n.p+"static/media/noavatar.88962eb7.jpg"},116:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return r}));var a=function(e){if(!e)return"Field is required"},r=function(e){return function(t){if(t&&t.length>e)return"Max length is ".concat(e," symbols")}}},133:function(e,t,n){e.exports={formFilter:"UsersSearchForm_formFilter__1wd09",filterSelect:"UsersSearchForm_filterSelect__169Jn",nameFilter:"UsersSearchForm_nameFilter__1Pnaj",nameFilterContainer:"UsersSearchForm_nameFilterContainer__1DV4X",nameFilterError:"UsersSearchForm_nameFilterError__Jlc_h"}},134:function(e,t,n){e.exports={textareaContainer:"FormControls_textareaContainer__1V6hV",formControl:"FormControls_formControl__1J1_m",error:"FormControls_error__3WJnq"}},156:function(e,t,n){e.exports=n.p+"static/media/logo192.4fe51017.png"},159:function(e,t,n){"use strict";n.d(t,"d",(function(){return E})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return _})),n.d(t,"b",(function(){return b})),n.d(t,"g",(function(){return v})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return O}));var a=n(11),r=n.n(a),c=n(29),u=n(56),o=n(15),i=n(63),s=n(22),l=function(e){return s.c.get("profile/".concat(e)).then((function(e){return e.data}))},m=function(e){return s.c.get("profile/status/".concat(e)).then((function(e){return e.data}))},f=function(e){return s.c.put("profile/status",{status:e}).then((function(e){return e.data}))},d=function(e){var t=new FormData;return t.append("image",e),s.c.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},p=function(e){return s.c.put("profile",e).then((function(e){return e.data}))},g={postsData:[],profile:null,status:""},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_POST":return Object(o.a)({},e,{postsData:[{id:e.postsData.length+1,string:t.postMessage,likesCount:0}].concat(Object(u.a)(e.postsData))});case"SET_USER_PROFILE":return Object(o.a)({},e,{profile:t.profile});case"DELETE_POST":return Object(o.a)({},e,{postsData:e.postsData.filter((function(e){return e.id!==t.id}))});case"SAVE_PHOTO_SUCCESS":return Object(o.a)({},e,{profile:Object(o.a)({},e.profile,{photos:t.photos})});case"SET_STATUS":return Object(o.a)({},e,{status:t.status});default:return e}},h={newPost:function(e){return{type:"ADD_POST",postMessage:e}},deletePost:function(e){return{type:"DELETE_POST",id:e}},setStatus:function(e){return{type:"SET_STATUS",status:e}},setUserProfile:function(e){return{type:"SET_USER_PROFILE",profile:e}},saveMainAvatarSuccess:function(e){return{type:"SAVE_PHOTO_SUCCESS",photos:e}}},_=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(e);case 2:a=t.sent,n(h.setUserProfile(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(e);case 2:a=t.sent,n(h.setStatus(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f(e);case 3:t.sent.resultCode===s.a.Success&&n(h.setStatus(e)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),alert(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(e);case 2:(a=t.sent).resultCode===s.a.Success&&n(h.saveMainAvatarSuccess(a.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n,a){var c,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(e);case 2:if((c=t.sent).resultCode!==s.a.Success){t.next=12;break}if(!(u=a().auth.id)){t.next=9;break}n(_(u)),t.next=10;break;case 9:throw new Error("userid cant be null");case 10:t.next=14;break;case 12:return n(Object(i.a)("profile",{_error:c.messages[0]})),t.abrupt("return",Promise.reject(c.messages[0]));case 14:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}},161:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return o}));var a=n(56),r=n(15),c={messagesData:[{id:1,string:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut alios omittam, hunc appello, quem ille unum secutus est. Primum cur ista res digna odio est, nisi quod est turpis? Pauca mutat vel plura sane; Nondum autem explanatum satis, erat, quid maxime natura vellet. Duo Reges: constructio interrete. Sic enim censent, oportunitatis esse beate vivere. Nisi autem rerum natura perspecta erit, nullo modo poterimus sensuum iudicia defendere. Satis est ad hoc responsum. "},{id:2,string:"How are you?!"},{id:3,string:"Yo! Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut alios omittam, hunc appello, quem ille unum secutus est. Primum cur ista res digna odio est, nisi quod est turpis? Pauca mutat vel plura sane; Nondum autem explanatum satis, erat, quid maxime natura vellet. Duo Reges: constructio interrete. Sic enim censent, oportunitatis esse beate vivere."},{id:4,string:"LOL"},{id:5,string:"Lorem ipsum dolor sit amet, consectetur adipiscing elit."}],dialogsData:[{id:1,name:"Dymych"},{id:2,name:"Alexander"},{id:3,name:"Vika"},{id:4,name:"Vasya"},{id:5,name:"Kotik"},{id:6,name:"Valeron"}]},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":return Object(r.a)({},e,{messagesData:[].concat(Object(a.a)(e.messagesData),[{id:e.messagesData.length+1,string:t.textMessage}])});default:return e}},o={sendMessage:function(e){return{type:"SEND_MESSAGE",textMessage:e}}}},213:function(e,t,n){e.exports=n.p+"static/media/icon-404.8b6b7725.png"},22:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return r}));var a,r,c=n(209),u="369bcd44-4414-4f27-bd8d-c3b6cdf99155",o="https://social-network.samuraijs.com/api/1.0/",i=n.n(c).a.create({withCredentials:!0,baseURL:o,headers:{"API-KEY":u}});!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error"}(a||(a={})),function(e){e[e.CaptchaIsRequired=10]="CaptchaIsRequired"}(r||(r={}))},249:function(e,t,n){e.exports=n(388)},254:function(e,t,n){},258:function(e,t,n){},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={CHAT:"/chat",LOGIN:"/login",DIALOGS:"/dialogs",PROFILE:"/profile/:userId?",MY_PROFILE:"/profile",USERS:"/users",NEWS:"/news",MUSIC:"/music",SETTINGS:"/settings",NOT_FOUND:"*"}},38:function(e,t,n){e.exports={login_form:"Login_login_form__2KjaZ",summaryErrorBlock:"Login_summaryErrorBlock__D50hn",summaryErrorBlock__message:"Login_summaryErrorBlock__message__yxe98",remember_me:"Login_remember_me__1pStn",login:"Login_login__3v1XG",login_page:"Login_login_page__CCykt",captcha:"Login_captcha__3KymT",mb_20:"Login_mb_20__3Lec3"}},388:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(40),u=n.n(c),o=(n(254),n(163)),i=n(164),s=n(198),l=n(200),m=n(391),f=n(25),d=n(24),p=n(14),g=n(33),E=n(44),h=n(15),_=n(66),b={initialized:!1},v=function(){return{type:"INITIALIZED_SUCCESS"}};function S(e){return function(t){return r.a.createElement(a.Suspense,{fallback:r.a.createElement(E.g,null)},r.a.createElement(e,t))}}var O=n(199),y=n(218),j=n(161),w=n(159),C={},x=n(72),I=n(88),T=Object(f.c)({profilePage:w.d,dialogsPage:j.b,sidebar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C;arguments.length>1&&arguments[1];return e},usersPage:x.d,auth:_.a,chat:I.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INITIALIZED_SUCCESS":return Object(h.a)({},e,{initialized:!0});default:return e}},form:O.a}),N=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||f.d,U=Object(f.e)(T,N(Object(f.a)(y.a))),L=n(30),k=(n(387),m.a.Content),F=m.a.Footer,P=L.a.CHAT,A=L.a.NEWS,R=L.a.MUSIC,D=L.a.LOGIN,G=L.a.USERS,M=L.a.DIALOGS,H=L.a.PROFILE,z=L.a.SETTINGS,V=L.a.NOT_FOUND,q=L.a.MY_PROFILE,W=r.a.lazy((function(){return n.e(4).then(n.bind(null,411))})),B=S(r.a.lazy((function(){return n.e(3).then(n.bind(null,410))}))),J=S(W),X=function(e){Object(l.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).catchAllUnhandledErrors=function(e){alert("Some Error in App (unhandledrejection).")},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.props.initApp(),window.addEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchAllUnhandledErrors)}},{key:"render",value:function(){return this.props.initialized?r.a.createElement(m.a,{style:{minHeight:"100vh"}},r.a.createElement(E.b,null),r.a.createElement(k,null,r.a.createElement(m.a,{className:"site-layout-background"},r.a.createElement(E.e,null),r.a.createElement(k,{style:{padding:"20px 80px",minHeight:"calc(100vh - 64px)",maxWidth:1100,margin:"auto"}},r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",render:function(){return r.a.createElement(d.a,{to:q})}}),r.a.createElement(d.b,{path:P,component:E.a}),r.a.createElement(d.b,{path:M,render:function(){return r.a.createElement(J,null)}}),r.a.createElement(d.b,{path:H,render:function(){return r.a.createElement(B,null)}}),r.a.createElement(d.b,{path:G,render:function(){return r.a.createElement(E.i,null)}}),r.a.createElement(d.b,{path:D,render:function(){return r.a.createElement(E.c,null)}}),r.a.createElement(d.b,{path:A,component:E.f}),r.a.createElement(d.b,{path:R,component:E.d}),r.a.createElement(d.b,{path:z,component:E.h}),r.a.createElement(d.b,{path:V,render:function(){return r.a.createElement("div",null,"404 not found")}}))))),r.a.createElement(F,{style:{textAlign:"center",background:"#001529",color:"#fff"}},"2021 Created by Vladislav Shevel")):r.a.createElement(E.g,null)}}]),n}(r.a.Component),Y=Object(f.d)(d.h,Object(p.b)((function(e){return{initialized:e.app.initialized}}),{initApp:function(){return function(e){e(Object(_.b)()).then((function(){e(v())}))}}}))(X),K=function(){return r.a.createElement(g.a,null,r.a.createElement(p.a,{store:U},r.a.createElement(Y,null)))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(K,null)),document.getElementById("root"))},44:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"f",(function(){return w})),n.d(t,"d",(function(){return C})),n.d(t,"i",(function(){return Z})),n.d(t,"b",(function(){return se})),n.d(t,"e",(function(){return ve})),n.d(t,"h",(function(){return Se})),n.d(t,"c",(function(){return xe})),n.d(t,"g",(function(){return p}));var a=n(95),r=n(0),c=n.n(r),u=n(14),o=n(392),i=n(219),s=n(197),l=n(114),m=n.n(l),f=n(88),d=n(390),p=(n(258),function(){return c.a.createElement(d.a,{className:"spin",size:"large"})}),g=n(118),E=n(103),h=n.n(E),_=(n(90),n(4)),b=n.n(_),v=function(e){for(var t=e.totalItemsCount,n=e.pageSize,u=e.onPageChanged,o=e.currentPage,s=e.portionSize,l=void 0===s?7:s,m=Math.ceil(t/n),f=[],d=1;d<m;d++)f.push(d);var p=Math.ceil(m/l),E=Object(r.useState)(1),_=Object(a.a)(E,2),v=_[0],S=_[1],O=(v-1)*l+1,y=v*l;return c.a.createElement("div",{className:h.a.pages},v>1&&c.a.createElement(i.a,{onClick:function(){S(v-1)}},"prev"),f.filter((function(e){return e>=O&&e<=y})).map((function(e){return c.a.createElement("div",{key:e,className:h.a.page_container},c.a.createElement("p",{className:b()(Object(g.a)({},h.a.selected,o===e),h.a.pagination_item),onClick:function(){u(e)}},e))})),p>v&&c.a.createElement(i.a,{onClick:function(){S(v+1)}},"next"))},S=function(){var e=Object(u.d)((function(e){return e.chat.status})),t=Object(u.c)();return Object(r.useEffect)((function(){return t(Object(f.c)()),function(){t(Object(f.d)())}}),[t]),c.a.createElement(c.a.Fragment,null,"ready"===e?c.a.createElement(c.a.Fragment,null,c.a.createElement(O,null),c.a.createElement(j,null)):c.a.createElement(p,null))},O=function(){var e=Object(u.d)((function(e){return e.chat.messages})),t=Object(r.useRef)(null),n=Object(r.useState)(!1),o=Object(a.a)(n,2),i=o[0],s=o[1];Object(r.useEffect)((function(){var e;i&&(null===(e=t.current)||void 0===e||e.scrollIntoView({behavior:"auto"}))}),[e]);return c.a.createElement("div",{style:{maxHeight:800,overflowY:"auto"},onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<30?s(!0):s(!1)}},e.map((function(e,t){return c.a.createElement(y,{message:e,key:t})})),c.a.createElement("div",{ref:t}))},y=c.a.memo((function(e){var t=e.message;return c.a.createElement("div",{style:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginTop:15}},c.a.createElement("div",{style:{marginRight:"15px"}},c.a.createElement("img",{style:{borderRadius:"50%"},src:t.photo?t.photo:m.a,width:50,alt:"avatar"})),c.a.createElement("div",null,c.a.createElement("b",null,c.a.createElement("span",null,t.userName)),c.a.createElement("p",{style:{padding:"5px 0",borderRadius:"5px"}},t.message)))})),j=Object(s.a)({form:"chatForm"})((function(){var e=Object(u.c)(),t=Object(r.useState)(""),n=Object(a.a)(t,2),s=n[0],l=n[1];return c.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"}},c.a.createElement(o.a,{required:!0,placeholder:"Enter message..",type:"text",size:"large",value:s,onChange:function(e){l(e.currentTarget.value)}}),c.a.createElement(i.a,{onClick:function(){s.trim()&&(e(Object(f.b)(s)),l(""))},type:"default",size:"large",style:{maxHeight:41}},"Send"))})),w=function(){return c.a.createElement("h2",null,"News")},C=function(){return c.a.createElement("h2",null,"Music")},x=n(15),I=n(24),T=n(208),N=n(72),U=n(210),L=Object(U.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),k=function(e){return e.usersPage.pageSize},F=function(e){return e.usersPage.totalUsersCount},P=function(e){return e.usersPage.currentPage},A=function(e){return e.usersPage.isFetching},R=function(e){return e.usersPage.followingInProgress},D=function(e){return e.usersPage.filter},G=n(33),M=n(45),H=n.n(M),z=function(e){var t=e.user,n=e.follow,a=e.unfollow,r=e.followingInProgress;return c.a.createElement("div",{className:H.a.user},c.a.createElement("span",{className:H.a.user_avaBlock},c.a.createElement("div",{style:{textAlign:"center"}},c.a.createElement(G.c,{to:"/profile/".concat(t.id)},c.a.createElement("img",{className:H.a.avatar,src:t&&t.photos&&null!==t.photos.small?t.photos.small:m.a,alt:"avatar"}))),c.a.createElement("div",{style:{textAlign:"center"}},t.followed?c.a.createElement("button",{disabled:r.some((function(e){return e===t.id})),className:"".concat(H.a.unfollow," btn"),onClick:function(){a(t.id)}},"UnFollow"):c.a.createElement("button",{disabled:r.some((function(e){return e===t.id})),className:"".concat(H.a.follow," btn"),onClick:function(){n(t.id)}},"Follow"))),c.a.createElement("span",{className:H.a.user_info},c.a.createElement("span",{className:H.a.person},c.a.createElement("div",{className:H.a.name},t.name),c.a.createElement("div",{className:H.a.status},t.status))))},V=n(104),q=n(222),W=n(133),B=n.n(W),J=c.a.memo((function(e){var t=e.onFilterChanged,n=Object(u.d)(D);return c.a.createElement(V.c,{initialValues:{term:n.term,friend:String(n.friend)},enableReinitialize:!0,onSubmit:function(e,n){var a=n.setSubmitting,r={term:e.term.trim(),friend:"null"===e.friend?null:"true"===e.friend};t(r),a(!1)}},(function(e){var t=e.isSubmitting;return c.a.createElement(V.b,{className:B.a.formFilter},c.a.createElement(V.a,{className:B.a.filterSelect,name:"friend",as:"select"},c.a.createElement("option",{value:"null"},"All"),c.a.createElement("option",{value:"true"},"Followed"),c.a.createElement("option",{value:"false"},"Unfollowed")),c.a.createElement(V.a,{className:B.a.nameFilter,type:"text",name:"term"}),c.a.createElement(i.a,{htmlType:"submit",disabled:t},"Search ",c.a.createElement(q.a,null)))}))})),X=n(213),Y=n.n(X),K=function(){var e=Object(u.d)(L),t=Object(u.d)(F),n=Object(u.d)(P),a=Object(u.d)(k),o=Object(u.d)(D),i=Object(u.d)(R),s=Object(u.c)(),l=Object(I.g)();Object(r.useEffect)((function(){var e=T.parse(l.location.search.substr(1)),t=n,r=o;e.page&&(t=Number(e.page)),e.term&&(r=Object(x.a)({},r,{term:e.term})),e.friend&&(r=Object(x.a)({},r,{friend:"null"===e.friend?null:"true"===e.friend})),s(Object(N.b)(t,a,r))}),[n,s,l.location.search,a]),Object(r.useEffect)((function(){l.push({pathname:"/users",search:"?term=".concat(o.term,"&friend=").concat(o.friend,"&page=").concat(n)})}),[o,n,l]);var m=function(e){s(Object(N.a)(e))},f=function(e){s(Object(N.c)(e))};return c.a.createElement("div",{className:H.a.users},c.a.createElement("div",{style:{marginBottom:15}},c.a.createElement(J,{onFilterChanged:function(e){s(Object(N.b)(1,a,e))}})),e.length?e.map((function(e){return c.a.createElement(z,{key:e.id,user:e,follow:m,unfollow:f,followingInProgress:i})})):c.a.createElement("div",{style:{textAlign:"center",fontSize:24}},c.a.createElement("p",null,c.a.createElement("b",null,"Not found users")),c.a.createElement("img",{src:Y.a,width:"400",alt:"not found"})),c.a.createElement(v,{currentPage:n,onPageChanged:function(e){s(Object(N.b)(e,a,o))},totalItemsCount:t,pageSize:a}))},Z=function(e){var t=Object(u.d)(A);return c.a.createElement(c.a.Fragment,null,t?c.a.createElement(p,null):null,c.a.createElement(K,null))},Q=n(391),$=n(395),ee=n(396),te=n(393),ne=n(156),ae=n.n(ne),re=n(79),ce=n.n(re),ue=n(66),oe=function(e){return e.auth.isAuth},ie=function(e){return e.auth.login},se=function(){var e=Q.a.Header,t=Object(u.d)(oe),n=Object(u.d)(ie),a=Object(u.c)();return c.a.createElement(e,null,c.a.createElement($.a,{justify:"space-between",align:"middle"},t?c.a.createElement(c.a.Fragment,null,c.a.createElement(ee.a,null,c.a.createElement("img",{className:ce.a.logo,src:ae.a,alt:"logo"})),c.a.createElement(ee.a,{flex:"align(-self): center"},c.a.createElement("div",{className:ce.a.login_block},c.a.createElement("div",{className:ce.a.login_info},c.a.createElement(te.a,{className:ce.a.login_name},null===n||void 0===n?void 0:n.slice(0,1))),c.a.createElement(i.a,{onClick:function(){a(Object(ue.d)())}},"Logout")))):c.a.createElement(c.a.Fragment,null,c.a.createElement(ee.a,null,c.a.createElement("img",{className:ce.a.logo,src:ae.a,alt:"logo"})),c.a.createElement(ee.a,null,c.a.createElement(G.c,{className:ce.a.login,to:"/login"},c.a.createElement(i.a,{type:"primary"},"Login"))))))},le=n(394),me=n(397),fe=n(398),de=n(399),pe=n(400),ge=n(401),Ee=n(402),he=n(403),_e=n(30),be=Q.a.Sider,ve=function(){return c.a.createElement(be,{className:"site-layout-background",width:200,style:{background:"#fff",borderRadius:"5px"}},c.a.createElement(le.a,{mode:"inline",style:{height:"100%",borderRadius:"5px"}},c.a.createElement(le.a.Item,{key:"1",icon:c.a.createElement(me.a,{style:{fontSize:"20px"}})},c.a.createElement(G.b,{to:_e.a.MY_PROFILE},"Me")),c.a.createElement(le.a.Item,{key:"2",icon:c.a.createElement(fe.a,{style:{fontSize:"20px"}})},c.a.createElement(G.b,{to:_e.a.USERS},"People")),c.a.createElement(le.a.Item,{key:"3",icon:c.a.createElement(de.a,{style:{fontSize:"20px"}})},c.a.createElement(G.b,{to:_e.a.DIALOGS},"Messages")),c.a.createElement(le.a.Item,{key:"4",icon:c.a.createElement(pe.a,{style:{fontSize:"20px"}})},c.a.createElement(G.b,{to:_e.a.MUSIC},"Music")),c.a.createElement(le.a.Item,{key:"5",icon:c.a.createElement(ge.a,{style:{fontSize:"20px"}})},c.a.createElement(G.b,{to:_e.a.NEWS},"News")),c.a.createElement(le.a.Item,{key:"6",icon:c.a.createElement(Ee.a,{style:{fontSize:"20px"}})},c.a.createElement(G.b,{to:_e.a.CHAT},"Chat")),c.a.createElement(le.a.Item,{key:"7",icon:c.a.createElement(he.a,{style:{fontSize:"20px"}})},c.a.createElement(G.b,{to:_e.a.SETTINGS},"Settings"))))},Se=function(){return c.a.createElement("h2",null,"Settings")},Oe=n(116),ye=n(58),je=n(38),we=n.n(je),Ce=Object(s.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error,a=e.captchaURL;return c.a.createElement("form",{className:we.a.login_form,onSubmit:t},c.a.createElement("div",{className:b()(we.a.login_input,we.a.mb_20)},Object(ye.c)("Email","email",[Oe.b],ye.a,{type:"text"})),c.a.createElement("div",{className:b()(we.a.login_input,we.a.mb_20)},Object(ye.c)("Password","password",[Oe.b],ye.a,{type:"password"})),c.a.createElement("div",{className:b()(we.a.remember_me,we.a.mb_20)},c.a.createElement("span",null,"Remember me"),Object(ye.c)(void 0,"rememberMe",[],ye.a,{type:"checkbox"})),a&&c.a.createElement("img",{className:we.a.captcha,src:a,alt:"captcha"}),a&&Object(ye.c)("Symbols from captcha","captcha",[Oe.b],ye.a,{type:"text"}),c.a.createElement("div",{className:we.a.btn},c.a.createElement(i.a,{type:"primary",onClick:t},"Sign In")),n&&c.a.createElement("div",{className:we.a.summaryErrorBlock},c.a.createElement("span",{className:we.a.summaryErrorBlock__message},n)))})),xe=function(){var e=Object(u.d)((function(e){return e.auth.captchaURL})),t=Object(u.d)((function(e){return e.auth.isAuth})),n=Object(u.c)();return t?c.a.createElement(I.a,{to:"/profile"}):c.a.createElement("div",{className:we.a.login_page},c.a.createElement("p",{className:we.a.login},"Sign In"),c.a.createElement(Ce,{onSubmit:function(e){n(Object(ue.c)(e.email,e.password,e.rememberMe,e.captcha))},captchaURL:e}))}},45:function(e,t,n){e.exports={avatar:"Users_avatar__3i9aU",users:"Users_users__2bQpg",user:"Users_user__2UjH8",user_info:"Users_user_info__3at2x",user_avaBlock:"Users_user_avaBlock__MJte4",location:"Users_location__2duEj",person:"Users_person__25JqS",follow:"Users_follow__1r_32",unfollow:"Users_unfollow__1kjq7",name:"Users_name__Gt7rs",status:"Users_status__2CIJi"}},58:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return f}));var a=n(149),r=n(0),c=n.n(r),u=n(150),o=n(134),i=n.n(o),s=function(e){var t=e.meta,n=t.touched,a=t.error,r=e.children,u=n&&a;return c.a.createElement("div",{className:"".concat(i.a.textareaContainer," ").concat(i.a.formControl," ").concat(u?i.a.error:"")},r,c.a.createElement("div",null,u&&c.a.createElement("span",null,a)))},l=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,["input","meta"]));return c.a.createElement(s,e,c.a.createElement("textarea",Object.assign({},t,n)))},m=function(e){var t=e.input,n=(e.meta,Object(a.a)(e,["input","meta"]));return c.a.createElement(s,e,c.a.createElement("input",Object.assign({},t,n)))};function f(e,t,n,a,r){var o=Object.assign({},r);return c.a.createElement(u.a,Object.assign({name:t,placeholder:e,component:a,validate:n},o))}},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return v}));var a=n(11),r=n.n(a),c=n(29),u=n(15),o=n(22),i=function(){return o.c.get("auth/me").then((function(e){return e.data}))},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return o.c.post("auth/login",{email:e,password:t,rememberMe:n,captcha:a}).then((function(e){return e.data}))},l=function(){return o.c.delete("auth/login").then((function(e){return e.data}))},m=n(63),f=function(){return o.c.get("security/get-captcha-url").then((function(e){return e.data.url}))},d={id:null,email:null,login:null,isFetching:!1,isAuth:!1,captchaURL:null},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":case"SET_CAPTCHA":return Object(u.a)({},e,{},t.payload);default:return e}},g=function(e,t,n,a){return{type:"SET_USER_DATA",payload:{id:e,email:t,login:n,isAuth:a}}},E=function(e){return{type:"SET_CAPTCHA",payload:{captchaURL:e}}},h=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c,u,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:(n=e.sent).resultCode===o.a.Success&&(a=n.data,c=a.id,u=a.email,s=a.login,t(g(c,u,s,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_=function(e,t,n,a){return function(){var u=Object(c.a)(r.a.mark((function c(u){var i,l;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s(e,t,n,a);case 2:(i=r.sent).resultCode===o.a.Success?(u(h()),u(E(null))):(i.resultCode===o.b.CaptchaIsRequired&&u(b()),l=i.messages.length>0?i.messages[0]:"some error",u(Object(m.a)("login",{_error:l})));case 4:case"end":return r.stop()}}),c)})));return function(e){return u.apply(this,arguments)}}()},b=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f();case 2:n=e.sent,t(E(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(){return function(){var e=Object(c.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l();case 2:e.sent.resultCode===o.a.Success&&t(g(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},72:function(e,t,n){"use strict";n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return _}));var a=n(11),r=n.n(a),c=n(29),u=n(56),o=n(15),i=n(22),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return i.c.get("users?page=".concat(e,"&count=").concat(t,"&term=").concat(n)+(null===a?"":"&friend=".concat(a))).then((function(e){return e.data}))},l=function(e){return i.c.post("follow/".concat(e)).then((function(e){return e.data}))},m=function(e){return i.c.delete("follow/".concat(e)).then((function(e){return e.data}))},f=function(e,t,n,a){return e.map((function(e){return e[n]===t?Object(o.a)({},e,{},a):e}))},d={users:[],totalUsersCount:null,pageSize:7,currentPage:1,isFetching:!1,followingInProgress:[],filter:{term:"",friend:null}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(o.a)({},e,{users:f(e.users,t.userID,"id",{followed:!0})});case"UNFOLLOW":return Object(o.a)({},e,{users:f(e.users,t.userID,"id",{followed:!1})});case"SET_CURRENT_PAGE":return Object(o.a)({},e,{currentPage:t.currentPage});case"TOGGLE_IS_FETCHING":return Object(o.a)({},e,{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWING_PROGRESS":return Object(o.a)({},e,{followingInProgress:t.isFetching?[].concat(Object(u.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});case"SET_USERS":return Object(o.a)({},e,{users:Object(u.a)(t.users)});case"SET_FILTER":return Object(o.a)({},e,{filter:t.payload});case"SET_USERS_TOTAL_COUNT":return Object(o.a)({},e,{totalUsersCount:t.totalUsersCount});default:return e}},g=function(e,t,n){return function(){var a=Object(c.a)(r.a.mark((function a(c){var u;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c(b.toggleIsFetching(!0)),c(b.setCurrentPage(e)),c(b.setFilter(n)),a.next=5,s(e,t,n.term,n.friend);case 5:u=a.sent,c(b.toggleIsFetching(!1)),c(b.setUsers(u.items)),c(b.setUsersTotalCount(u.totalCount));case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},E=function(){var e=Object(c.a)(r.a.mark((function e(t,n,a,c){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(b.toggleIsFollowing(!0,n)),e.next=3,a(n);case 3:e.sent.resultCode===i.a.Success&&t(c(n)),t(b.toggleIsFollowing(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),h=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E(n,e,l,b.followSuccess);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:E(n,e,m,b.unfollowSuccess);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},b={followSuccess:function(e){return{type:"FOLLOW",userID:e}},unfollowSuccess:function(e){return{type:"UNFOLLOW",userID:e}},setUsers:function(e){return{type:"SET_USERS",users:e}},setCurrentPage:function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}},setFilter:function(e){return{type:"SET_FILTER",payload:Object(o.a)({},e)}},setUsersTotalCount:function(e){return{type:"SET_USERS_TOTAL_COUNT",totalUsersCount:e}},toggleIsFetching:function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},toggleIsFollowing:function(e,t){return{type:"TOGGLE_IS_FOLLOWING_PROGRESS",isFetching:e,userId:t}}}},79:function(e,t,n){e.exports={header:"Header_header__2dUNX",logo:"Header_logo__3Z-If",login:"Header_login__2BDq1",login_block:"Header_login_block__2AF1w",login_info:"Header_login_info__2eddo",login_name:"Header_login_name__3G794",login_email:"Header_login_email__2Zu2V"}},88:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return U})),n.d(t,"d",(function(){return L})),n.d(t,"b",(function(){return k}));var a,r=n(11),c=n.n(r),u=n(29),o=n(56),i=n(15),s={messagesRecieved:[],statusChanged:[]},l=function(){console.log("ws has down!"),f("pending"),setTimeout(d,3e3)},m=function(){var e,t,n,r;null===(e=a)||void 0===e||e.removeEventListener("close",l),null===(t=a)||void 0===t||t.removeEventListener("message",p),null===(n=a)||void 0===n||n.removeEventListener("open",g),null===(r=a)||void 0===r||r.removeEventListener("error",E)},f=function(e){s.statusChanged.forEach((function(t){return t(e)}))};function d(){var e;m(),null===(e=a)||void 0===e||e.close(),a=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx"),f("pending"),a.addEventListener("close",l),a.addEventListener("message",p),a.addEventListener("open",g),a.addEventListener("error",E)}var p=function(e){var t=JSON.parse(e.data);null===s||void 0===s||s.messagesRecieved.forEach((function(e){return e(t)}))},g=function(){f("ready")},E=function(){f("error")},h=function(e,t){return s[e].push(t),function(){s[e]=s[e].filter((function(e){return e!==t}))}},_=function(e,t){s[e]=s[e].filter((function(e){return e!==t}))},b=function(e){var t;null===(t=a)||void 0===t||t.send(e)},v=function(){d()},S=function(){var e;s.messagesRecieved=[],s.statusChanged=[],m(),null===(e=a)||void 0===e||e.close()},O={messages:[],status:"pending"},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MESSAGES_RECIEVED":return Object(i.a)({},e,{messages:[].concat(Object(o.a)(e.messages),Object(o.a)(t.payload))});case"ERASE_OLD_MESSAGES":return Object(i.a)({},e,{messages:[]});case"STATUS_CHANGED":return Object(i.a)({},e,{status:t.payload});default:return e}},j=function(e){return{type:"MESSAGES_RECIEVED",payload:e}},w=function(e){return{type:"STATUS_CHANGED",payload:e}},C=function(){return{type:"ERASE_OLD_MESSAGES"}},x=null,I=function(e){return null==x&&(x=function(t){e(j(t))}),x},T=null,N=function(e){return null==T&&(T=function(t){e(w(t))}),T},U=function(){return function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(),h("messagesRecieved",I(t)),h("statusChanged",N(t));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},L=function(){return function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_("messagesRecieved",I(t)),_("statusChanged",N(t)),S(),t(C());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},k=function(e){return Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:b(e);case 1:case"end":return t.stop()}}),t)})))}},90:function(e,t,n){}},[[249,1,2]]]);
//# sourceMappingURL=main.7b95a698.chunk.js.map